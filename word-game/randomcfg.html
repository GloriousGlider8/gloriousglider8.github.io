<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
	<title>word game</title>
	<link rel="stylesheet" href="/assets/styles/common.css">
</head>
<body class="background-default">
	<div class="center-cont">
	<form class="form-in-flex" action="javascript:doShit()">
	<h1 class="text-center">Word Game</h1>
	<p>Random Configuration</p>
	<label for="word">Word Length:</label>
	<input type="number" id="word" min="2" max="10" required>
	<label for="num">Maximum Number of Guesses:</label>
	<input type="number" id="num" min="2" max="20" required>
	<div class="button-container" style="margin-bottom: 0;">
	<a href="/word-game/make.html" class="button blue contained-button">Manual</a>
	<button type="submit" class="button green contained-button">Start</button>
	</div>
	</form>
	</div>
</body>
<script>
	async function getWord(len) {
		try {
			const response = await fetch(`https://random-word-api.herokuapp.com/word?length=${len}`);
			if (!response.ok) {alert("error fetching random word"); return null;}
			const data = await response.json();
			return data;
		} catch (err) {
			alert("error fetching random word");
			return null;
		}
	}

	async function doShit() {
		const wordLen = document.getElementById("word").value.toLowerCase()
		const nums = document.getElementById("num").value

		const word = (await getWord(wordLen))[0].toLowerCase()
		const wordDat = window.btoa(word)

		window.location.href = `/word-game?w=${wordDat}&n=${nums}`
	}
</script>
</html>