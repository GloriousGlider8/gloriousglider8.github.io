<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
	<title>word game</title>
	<link rel="stylesheet" href="/assets/styles/common.css">
	<link rel="stylesheet" href="/assets/styles/word-game.css">
</head>
<body class="background-default">
	<div class="center-cont">
	<form class="form-in-flex">
	<h1 class="text-center">Finish!</h1>
	<p id="failmsg"></p>
	<div id="game-cont">
	</div>
	<p>Your final score was:</p>
	<div id="score-cont">
	</div>
	<div class="button-container" style="padding-top: 25px;">
		<a class="button contained-button blue" href="/word-game/make.html">New Puzzle</a>
	</div>
	</form>
	</div>
</body>
<script>
	function updateClipboard(newClip) {
	navigator.clipboard.writeText(newClip).then(
		() => {
		return true;
		},
		() => {
			alert("we can't write to your clipboard ;-;")
		return false;
		},
	);
	}

	const params = new URLSearchParams(window.location.search)

	const word = atob(params.get("w")).toUpperCase()
	const number = params.get("n")
	const score = params.get("p")

	document.getElementById("failmsg").innerHTML = `You failed to guess the word in ${number} guesses!<br/>The word was:`
	document.getElementById("game-cont").innerHTML = `<div class="word-row" style="grid-template-columns: repeat(${word.length}, 1fr);" id="word"></div>`
	document.getElementById("score-cont").innerHTML = `<div class="word-row" style="grid-template-columns: repeat(${word.length}, 1fr);" id="score"></div>`

	for (let i = 0; i < word.length; i++) {
		document.getElementById("word").innerHTML = document.getElementById("word").innerHTML.concat(`<div class="word-panel green"><p>${word.charAt(i)}</p></div>`)
	}

	for (let i = 0; i < word.length; i++) {
		document.getElementById("score").innerHTML = document.getElementById("score").innerHTML.concat(`<div class="word-panel"><p>${score.toString().padStart(word.length, "0").charAt(i)}</p></div>`)
	}
</script>
</html>